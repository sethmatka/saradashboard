<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Main Market Management</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="../css/main-market-styles.css" />
</head>
<body>

  <!-- Hamburger Menu Button -->
  <div class="hamburger-menu" id="hamburgerMenu">
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
  </div>

  <!-- Sidebar Panel -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <div class="toggle-switch">
        <div class="toggle-circle"></div>
      </div>
      <div class="breadcrumb">
        <span>Dashboard</span> / <span>Main Market Management</span>
      </div>
    </div>
    
    <nav class="sidebar-nav">
      <div class="nav-item">
        <i class="icon">📊</i>
        <span><a href="index.html">Dashboard</a></span>
      </div>
      <div class="nav-item">
        <i class="icon">💸</i>
        <span><a href="withdrawal-management.html">Withdrawal Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item">
        <i class="icon">💳</i>
        <span><a href="wallet-management.html">Wallet Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item active">
        <i class="icon">🏪</i>
        <span><a href="main-market-management.html">Main Market Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item">
        <i class="icon">🎰</i>
        <span><a href="gali-disawar-management.html">Gali Disawar Market Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item">
        <i class="icon">⭐</i>
        <span><a href="starline-management.html">Starline Market Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item">
        <i class="icon">🏆</i>
        <span><a href="bid-report-management.html">Bid Report Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item">
        <i class="icon">📢</i>
        <span><a href="users-management.html">Users Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item">
        <i class="icon">📋</i>
        <span><a href="notice-management.html">Notice Management</a></span>
        <i class="arrow">›</i>
      </div>
      <div class="nav-item">
        <i class="icon">🚪</i>
        <span>Logout</span>
      </div>
    </nav>
  </div>

  <!-- Overlay for mobile -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <div class="container">

    <header class="page-header">
      <h1>🏪 Main Market Management</h1>
      <p>Manage main market numbers and timings</p>
    </header>

    <section class="stats-summary">
      <div class="stat-card">
        <div class="stat-icon">🎲</div>
        <div class="stat-info">
          <div class="stat-number" id="totalMarkets">0</div>
          <div class="stat-label">Total Markets</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">🕐</div>
        <div class="stat-info">
          <div class="stat-number" id="activeMarkets">0</div>
          <div class="stat-label">Active Markets</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">⏰</div>
        <div class="stat-info">
          <div class="stat-number" id="closedMarkets">0</div>
          <div class="stat-label">Closed Markets</div>
        </div>
      </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
      <div class="search-container">
        <div class="search-group">
          <label for="marketSearch">Search Market:</label>
          <input type="text" id="marketSearch" placeholder="Search by market name..." onkeyup="searchMarkets()">
        </div>
        <div class="search-actions">
          <button class="clear-search-btn" onclick="clearSearch()">🗑️ Clear</button>
        </div>
      </div>
    </section>

    <section class="markets-section">
      <div class="section-header">
        <h2>Main Markets</h2>
        <div class="header-actions">
          <button class="clear-all-btn" onclick="clearAllNumbers()">🗑️ Clear All Numbers</button>
          <button class="refresh-btn" onclick="fetchMainMarkets()">🔄 Refresh</button>
        </div>
      </div>
      
      <div class="markets-container" id="marketsContainer">
        <div class="loading">Loading main markets...</div>
      </div>
    </section>

  </div>

  <!-- Update Number Modal -->
  <div class="modal" id="updateModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Update Market Number</h3>
        <span class="close" onclick="closeUpdateModal()">&times;</span>
      </div>
      <div class="modal-body">
        <div class="market-info">
          <h4 id="modalMarketName"></h4>
          <p>Current Number: <span id="modalCurrentNumber"></span></p>
        </div>
        <div class="input-group">
          <label for="newNumber">New Number:</label>
          <input type="text" id="newNumber" placeholder="Enter new number">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-cancel" onclick="closeUpdateModal()">Cancel</button>
        <button class="btn-update" onclick="updateMarketNumber()">Update Number</button>
      </div>
    </div>
  </div>

  <script src="../js/auth.js"></script>
  <script type="module" src="../js/main-market-management.js"></script>
</body>
</html>
